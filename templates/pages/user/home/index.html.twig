{% extends 'themes/base_user.html.twig' %}

{% block title %}Mon Espace
{% endblock %}
{% block description %}Accueil de votre espace personnel GOS Automobile.
{% endblock %}

{% block main %}
	<div class="container my-5">
		<div class="row">
			<div
				class="col-md-10 mx-auto">

				{# En-tête de bienvenue #}
				<div class="text-center mb-5">
					<h1 class="display-4">
						{% set current_hour = "now"|date("H") %}
						{% if current_hour >= 18 or current_hour < 4 %}
							Bonsoir,
						{% else %}
							Bonjour,
						{% endif %}
						{{ app.user.firstName }}
						!
					</h1>
					<p class="lead text-muted">Bienvenue sur votre espace personnel.</p>
				</div>

				{# ========================================================== #}
				{#        BLOC D'INFORMATION DYNAMIQUE SUR LE STATUT          #}
				{# ========================================================== #}
					<div class="card mb-4 shadow-sm"> <div class="card-header">
						<h5 class="mb-0">Votre Statut Actuel</h5>
					</div>
					<div class="card-body">
						{% if is_granted('ROLE_SUPER_ADMIN') %}
							<div class="alert alert-danger d-flex align-items-center mb-0" role="alert">
								<i class="fas fa-crown fa-2x me-3"></i>
								<div>
									<strong>Super Administrateur.</strong>
									Vous disposez de tous les droits sur l'application, y compris la gestion des autres utilisateurs.
								</div>
							</div>
						{% elseif is_granted('ROLE_ADMIN') %}
							<div class="alert alert-success d-flex align-items-center mb-0" role="alert">
								<i class="fas fa-user-shield fa-2x me-3"></i>
								<div>
									<strong>Administrateur.</strong>
									Vous avez accès au panneau de gestion pour créer et modifier le contenu du site.
								</div>
							</div>
						{% else %}
							<div class="alert alert-info d-flex align-items-center mb-0" role="alert">
								<i class="fas fa-user fa-2x me-3"></i>
								<div>
									<strong>Utilisateur.</strong>
									Vos permissions sont limitées à la consultation de cet espace.
								</div>
							</div>
						{% endif %}
					</div>
				</div>

				{# ========================================================== #}
				{#        BLOC D'ACTIONS DYNAMIQUES SELON LES RÔLES             #}
				{# ========================================================== #}
					<div class="card shadow-sm"> <div class="card-header">
						<h5 class="mb-0">Actions Rapides</h5>
					</div>
					<div
						class="list-group list-group-flush">
						{# Ce lien n'est visible que si l'utilisateur a le ROLE_ADMIN #}
						{% if is_granted('ROLE_ADMIN') %}
							<a href="{{ path('app_admin_home') }}" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
								<span>
									<i class="fas fa-cogs me-3 text-primary"></i>Accéder au Panneau d'Administration</span>
								<i class="fas fa-chevron-right text-muted"></i>
							</a>
						{% endif %}

						<a href="{{ path('app_user_profile_index') }}" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
							<span>
								<i class="fas fa-user-edit me-3 text-info"></i>Modifier mon profil et mot de passe</span>
							<i class="fas fa-chevron-right text-muted"></i>
						</a>

						<a href="{{ path('app_visitor_welcome') }}" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
							<span>
								<i class="fas fa-globe me-3 text-success"></i>Retourner au site public</span>
							<i class="fas fa-chevron-right text-muted"></i>
						</a>
					</div>
				</div>

			</div>
		</div>
	</div>
{% endblock %}
